@tailwind base;
@tailwind components;
@tailwind utilities;

/* Ensure theme applies to the root elements */
html, body {
  @apply bg-base-100 text-base-content;
}

/* Improved text readability */
@layer base {
  /* Ensure minimum contrast for readability */
  .text-base-content\/50 {
    color: hsl(var(--bc) / 0.9);
  }
  
  .text-base-content\/60 {
    color: hsl(var(--bc) / 0.95);
  }
  
  .text-base-content\/70 {
    color: hsl(var(--bc) / 1);
  }
  
  .text-base-content\/80 {
    color: hsl(var(--bc) / 1);
  }
  
  /* Ensure all text is readable */
  p, span, div, li, td, th {
    @apply text-base-content;
  }
  
  /* Secondary text should still be readable */
  .text-secondary {
    opacity: 0.95;
  }
  
  .text-muted {
    @apply text-base-content;
    opacity: 0.9;
  }
}

/* Enhanced Accessibility Styles */
@layer base {
  /* Focus indicators for better keyboard navigation */
  *:focus {
    outline: 2px solid hsl(var(--p));
    outline-offset: 2px;
  }

  /* Enhanced focus for interactive elements */
  button:focus,
  a:focus,
  input:focus,
  select:focus,
  textarea:focus {
    outline: 2px solid hsl(var(--p));
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
  }

  /* Skip links */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  .sr-only:focus,
  .focus\:not-sr-only:focus {
    position: static;
    width: auto;
    height: auto;
    padding: 0.5rem 1rem;
    margin: 0;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .navbar {
      border-bottom: 2px solid;
    }
    
    .btn {
      border: 2px solid;
    }
    
    .card {
      border: 1px solid;
    }
  }

  /* Reduce motion for users who prefer it */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* Improved color contrast for text */
  .text-base-content {
    color: hsl(var(--bc) / 1);
  }

  .text-base-content\/70 {
    color: hsl(var(--bc) / 1);
  }

  .text-base-content\/50 {
    color: hsl(var(--bc) / 0.9);
  }
}

@layer components {
  /* Enhanced navigation styles */
  .navbar {
    @apply border-b border-base-300;
  }

  /* Better focus states for menu items */
  .menu li a:focus,
  .menu li button:focus {
    @apply bg-base-300 outline-none ring-2 ring-primary ring-offset-2;
  }

  .menu li a.active {
    @apply bg-primary text-primary-content font-semibold shadow-md;
  }

  /* Enhanced sidebar styles */
  .drawer-side {
    @apply z-40;
  }

  .drawer-overlay {
    @apply bg-black/50 backdrop-blur-sm;
  }

  /* Better breadcrumb styling */
  .breadcrumbs ol li a:hover {
    @apply text-primary underline;
  }

  .breadcrumbs ol li[aria-current="page"] {
    @apply font-semibold text-base-content;
  }

  /* Enhanced form controls */
  .form-control label {
    @apply font-medium text-base-content;
  }

  .input:focus,
  .textarea:focus,
  .select:focus {
    @apply ring-2 ring-primary ring-offset-2 border-primary;
  }

  /* Better button states */
  .btn:focus-visible {
    @apply ring-2 ring-primary ring-offset-2;
  }

  .btn:disabled {
    @apply opacity-50 cursor-not-allowed;
  }

  /* Enhanced card styling */
  .card {
    @apply border border-base-300/50;
  }

  .card:focus-within {
    @apply ring-1 ring-primary/20;
  }

  /* Optimized card body spacing */
  .card-body {
    @apply p-4 lg:p-6;
  }

  .card-body.compact {
    @apply p-3;
  }

  /* Alert and notification improvements */
  .alert {
    @apply border border-base-300/20;
  }

  /* Loading states */
  .loading {
    @apply animate-spin;
  }

  @media (prefers-reduced-motion: reduce) {
    .loading {
      @apply animate-none;
    }
  }

  /* Better mobile touch targets and spacing */
  @media (max-width: 768px) {
    .btn {
      @apply min-h-12 px-4;
    }
    
    .menu li a,
    .menu li button {
      @apply min-h-12 px-3;
    }

    /* Reduce padding on mobile for better space usage */
    .card-body {
      @apply p-3;
    }

    /* Optimize grid gaps on mobile */
    .grid {
      @apply gap-3;
    }

    /* Reduce excessive margins on mobile */
    .space-y-6 > * + * {
      @apply mt-4;
    }

    .space-y-4 > * + * {
      @apply mt-3;
    }
  }

  /* Enhanced dropdown styles */
  .dropdown-content {
    @apply border border-base-300 shadow-xl;
  }

  /* Better modal accessibility */
  .modal:target,
  .modal.modal-open {
    @apply pointer-events-auto visible opacity-100;
  }

  /* Utility classes for spacing control */
  .spacing-tight {
    @apply space-y-2;
  }

  .spacing-normal {
    @apply space-y-4;
  }

  .spacing-loose {
    @apply space-y-6;
  }

  /* Optimized form spacing */
  .form-control + .form-control {
    @apply mt-3;
  }

  /* Better list spacing */
  .menu li + li {
    @apply mt-1;
  }

  /* Form alignment fixes for admin dashboard */
.admin-form-grid {
  @apply grid grid-cols-1 md:grid-cols-3 gap-4 items-start;
}

.admin-form-row {
  @apply flex flex-col md:flex-row gap-4 items-start;
}

.admin-form-control {
  @apply form-control flex-1;
}

.admin-form-control .label {
  @apply mb-2;
}

.admin-form-control .input,
.admin-form-control .select,
.admin-form-control .btn,
.admin-form-control .textarea {
  @apply w-full;
}

/* Ensure consistent height for form elements */
.admin-form-control .input,
.admin-form-control .select {
  @apply h-12;
}

.admin-form-control .btn {
  @apply h-12;
}

/* Fix for label alignment */
.admin-form-control .label-text {
  @apply text-sm font-semibold;
}

/* Notification utilities */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Enhanced avatar animations */
.avatar-hover {
  @apply transition-all duration-300 ease-in-out;
}

.avatar-hover:hover {
  @apply transform scale-110 shadow-2xl;
}

/* Notification bell animations */
.notification-pulse {
  animation: notification-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes notification-pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

/* Enhanced gradients */
.gradient-primary {
  background: linear-gradient(135deg, hsl(var(--p)) 0%, hsl(var(--pf)) 50%, hsl(var(--p)) 100%);
}

.gradient-warning {
  background: linear-gradient(135deg, hsl(var(--wa)) 0%, hsl(var(--waf)) 50%, hsl(var(--wa)) 100%);
}

.gradient-secondary {
  background: linear-gradient(135deg, hsl(var(--s)) 0%, hsl(var(--sf)) 50%, hsl(var(--s)) 100%);
}

/* Responsive notification system */
@media (max-width: 768px) {
  .notification-dropdown {
    width: calc(100vw - 2rem);
    right: -1rem;
    max-width: 320px;
  }
  
  .notification-item {
    padding: 0.75rem;
  }
  
  .notification-content {
    font-size: 0.875rem;
  }
}

/* Enhanced notification animations */
.notification-enter {
  opacity: 0;
  transform: translateY(-10px) scale(0.95);
}

.notification-enter-active {
  opacity: 1;
  transform: translateY(0) scale(1);
  transition: opacity 200ms ease-out, transform 200ms ease-out;
}

.notification-exit {
  opacity: 1;
  transform: translateY(0) scale(1);
}

.notification-exit-active {
  opacity: 0;
  transform: translateY(-10px) scale(0.95);
  transition: opacity 200ms ease-in, transform 200ms ease-in;
}

/* Improved avatar styling */
.avatar-enhanced {
  background: linear-gradient(135deg, 
    hsl(var(--p)) 0%, 
    hsl(var(--pf)) 25%, 
    hsl(var(--p)) 50%, 
    hsl(var(--pf)) 75%, 
    hsl(var(--p)) 100%
  );
  background-size: 200% 200%;
  animation: gradient-shift 3s ease infinite;
}

@keyframes gradient-shift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

  .modal-box:focus {
    @apply outline-none ring-2 ring-primary ring-offset-2;
  }

  /* Improved table accessibility */
  .table th {
    @apply font-semibold text-base-content;
  }

  .table tr:focus-within {
    @apply bg-base-200;
  }

  /* Better progress indicators */
  .progress:focus {
    @apply ring-2 ring-primary ring-offset-2;
  }

  /* Enhanced tooltip styling */
  .tooltip:before {
    @apply text-sm font-medium;
  }

  /* Better error states */
  .input-error,
  .textarea-error,
  .select-error {
    @apply border-error ring-error;
  }

  /* Success states */
  .input-success,
  .textarea-success,
  .select-success {
    @apply border-success ring-success;
  }
}

@layer utilities {
  /* Accessibility utilities */
  .focus-visible\:ring-primary:focus-visible {
    @apply ring-2 ring-primary ring-offset-2;
  }

  .focus-visible\:ring-secondary:focus-visible {
    @apply ring-2 ring-secondary ring-offset-2;
  }

  /* Text size utilities for better readability */
  .text-readable {
    @apply text-base leading-relaxed;
  }

  .text-readable-lg {
    @apply text-lg leading-relaxed;
  }

  /* High contrast utilities */
  .high-contrast {
    @apply contrast-125 saturate-150;
  }

  /* Motion utilities */
  .motion-safe\:animate-fade-in {
    @apply animate-pulse;
  }

  @media (prefers-reduced-motion: reduce) {
    .motion-safe\:animate-fade-in {
      @apply animate-none;
    }
  }

  /* Touch target utilities */
  .touch-target {
    @apply min-h-12 min-w-12;
  }

  .touch-target-lg {
    @apply min-h-16 min-w-16;
  }
}

/* Invoice Status Badges */
.badge[data-status="pending"] {
  background-color: #f59e0b;
  color: white;
}

.badge[data-status="paid"] {
  background-color: #10b981;
  color: white;
}

.badge[data-status="overdue"] {
  background-color: #ef4444;
  color: white;
}

.badge[data-status="cancelled"] {
  background-color: #6b7280;
  color: white;
}

/* Card hover effects */
.shadow-hover {
  transition: all 0.2s ease-in-out;
}

.shadow-hover:hover {
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  transform: translateY(-2px);
}

/* Table styles */
.table-zebra tbody tr:nth-child(even) {
  background-color: rgba(var(--b2, 0 0 0), 0.05);
}